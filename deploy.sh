#!/bin/bash

# ==========================================
# Скрипт для ручного или автоматического деплоя
# ==========================================

# Переходим в директорию проекта
# Замените на реальный путь, где лежит проект на сервере
PROJECT_DIR="/var/www/shinsetsu-hair.shop"
cd $PROJECT_DIR || exit

echo "Начинаем деплой..."

# 1. Получаем последние обновления из git
echo "Стягиваем изменения из GitHub..."
git pull origin main # или master

# 2. Обновляем зависимости для Python
echo "Обновляем зависимости Python..."
# Если вы используете виртуальное окружение (рекомендуется):
# source venv/bin/activate
pip install -r requirements.txt

# 3. Перезапускаем сервис
# В зависимости от того, как вы запускаете приложение (uvicorn/fastapi)
# Рекомендуемый способ в Linux - использовать systemd. 
echo "Перезапускаем приложение..."
# Расскомментируйте нужную строку:

# Если через pm2 (рекомендуется):
pm2 restart shinsetsu-hair

echo "Деплой успешно завершен!"
